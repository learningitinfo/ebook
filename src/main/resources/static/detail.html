<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="shortcut icon" href="./images/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="./css/commons.css">
    <link rel="stylesheet" href="./css/index.css">
    <link rel="stylesheet" href="http://at.alicdn.com/t/font_2466032_ycuozd5kl5.css">
    <link rel="stylesheet" href="./css/detail.css">
    <script src="./js/detail.js"></script>
</head>

<body>
    <!-- 头部开始 -->
    <div class="header flux clearfix">
        <div class="container">
            <h1 class="logo l">
                <img src="./images/logo.jpeg" alt="">
            </h1>
            <ul class="shortcut">
                <li>
                    <img src="./images/addr.png" alt="">
                    北京
                    <img src="./images/xia.png" alt="">
                </li>
                <li>首页</li>
                <li>分类</li>
                <li>
                    <img src="./images/search.png" alt="">
                    <input type="text" placeholder="搜索图书、课堂、文艺类">
                    <button>搜索</button>
                </li>
                <li>
                    <img src="./images/user.png" alt="">
                    <span>登录</span>
                </li>
                <li>
                    <img src="./images/phone.png" alt="">
                    <span>下载</span>
                </li>
                <li>
                    <div class="shopcart" onclick="window.location.href='./shopcart.html'">
                        <i class="iconfont icon-gouwuche" style="font-size:20px"></i>
                        <span>购物车</span>
                        <span>0</span>
                    </div>
                </li>
            </ul>
        </div>
    </div>
    <!-- 头部结束 -->
    <!-- 商品详情部分 -->
    <div class="bookdetail container">
        <div class="detail-img">
            <img id="image" src="http://img3m6.ddimg.cn/70/2/28529296-1_w_5.jpg" alt="">
        </div>
        <div class="detail-content">
            <div class="detail-content-h">
                <h3 id="name" style="display: block;overflow: hidden;white-space: nowrap;text-overflow: ellipsis;">社交新零售：5G时代的零售变革，读懂零售本质，抓住未来商机。</h3>
                <p style="display: none;">
                    <span>教你如何把货铺到消费者的枕头上，从而实现把货卖到爆。</span>
                    <a href="#">吴晓波新作，一本书读懂三百年商业历史>></a>
                </p>
            </div>
            <div class="detail-content-m clearfix">
                <div class="detail-content-m-l">
                    <p>作者: <a href="#" id="author">王欧飏</a></p>

                    <p>出版社:<a href="#" id="publisher">人民邮件出版社</a> </p>
                    <p id="pubtime">出版时间：2020年05月</p>
                    <p>评分：
                        <i class="iconfont icon-xing_mian selectedstart"></i>
                        <i class="iconfont icon-xing_mian selectedstart"></i>
                        <i class="iconfont icon-xing_mian selectedstart"></i>
                        <i class="iconfont icon-xing"></i>
                        <i class="iconfont icon-xing"></i>
                    </p>
                    <p id="stock">库存:</p>
                </div>
                <div class="detail-content-m-r">
                    销售价：<span class="price" id="salesprice">￥37.82</span>
                </div>
            </div>

            <div class="detail-content-b">
                <span>购买数量</span>
                <span onclick="subnum()">-</span>
                <input type="text" value="1" class="num" id="num">
                <span onclick="addnum()">+</span>
                <script>
                    function addnum() {
                        //1.先得到原来的数量
                        let num = parseInt($("#num").val());//val得到的是字符串，需要转换成整数
                        //判断当前数量是否已经大于等于库存了，如等于库存了就不能加了
                        //通过id选择器找到库存标签，然后得到文本内容，再通过:对字符串进行拆分
                        let stock = parseInt($("#stock").text().split(":")[1]);

                        //判断
                        if (num >= stock){
                            alert("库存不足!");
                            return;   //结束，不执行后面的代码
                        }

                        //2.在原值的基础上+1
                        num = num + 1;
                        //3.修改input标签的值
                        $("#num").val(num);
                    }
                    function subnum() {
                        //1.得到原数量
                        let num = parseInt($("#num").val());
                        //2.判断
                        if (num <= 1){
                            alert("至少购买一件!");
                            return;
                        }
                        //3.在原来的基础上-1
                        num = num - 1;

                        //4.重新设置数字
                        $("#num").val(num);
                    }
                </script>
                <button>
                    <i class="iconfont icon-renminbifuhao-"></i>立即购买
                </button>
                <button onclick="addcart()">
                    <i class="iconfont icon-gouwuche"></i>加入购物车
                </button>
                <script>
                    function addcart() {
                        //得到商品id、购买数量、销售价格
                        let id = window.location.href.split("=")[1];
                        let num = $("#num").val();
                        let price = $("#salesprice").text();

                        console.log(id,num,price);
                    }
                </script>
            </div>
        </div>
    </div>
    <!-- 商品详情部分结束 -->
    <div class="prointro container">
        <div>
            <span id="pdt">商品详情</span>
            <span id="pco">顾客评价</span>
            <i class="iconfont icon-qipao qp">
                <i class="qc">5</i>
            </i>
        </div>
        <div class="prointro-prodetail">
            <h4>内容简介</h4>
            <p style="text-indent:2em;" id="description">
                带货女王薇娅三分钟带货上万件，抖音网红一个推荐就商品缺货，这些现象的核心在于他们都用了社交新零售。传统的零售是把货铺在卖场，而社交新零售教你如何把货铺到消费者的枕头上，从而实现把货卖到爆。如果你错过了电子商务化，也错过了微商，下一个你不可错过的风口就是社交新零售。
                在本书里，我们将从7个方面去分析社交新零售以及做好社交新零售的“打法”，为传统电商与零售企业转战社交新零售提供理论基础及实操方法。本书最大的特色在于：通俗易懂，与实例结合。通过案例与示意图的结合，不仅能提升阅读体验，还能够帮助读者加深理解。此外，示意图、逻辑图十分清晰明了，可以让读者朋友们理清思路，引导读者自我的思考。
            </p>

        </div>
        <div class="prointro-procomment">
            iOS 是一个由苹果公司开发和发布的手机操作系统。最初是于 2007 年首次发布 iPhone、iPod Touch 和 Apple TV。iOS 派生自 OS X，它们共享 Darwin 基础。OS X
            操作系统是用在苹果电脑上，iOS 是苹果的移动版本。
        </div>
    </div>
    <!--引入jQuery-->
    <script src="js/jquery.min.js"></script>
    <script>
        //1.获取到id  通过页面的url来获取
        let url = window.location.href;
        console.log(url);

        //2.通过=将url转换成数组，数组的第[1]个就是id值
        let arr = url.split("=");

        //3.得到id
        let id = arr[1];

        console.log(id);

        //4.向后台发送请求，将当前商品的id传给后台
        //1.当数量不大、不敏感时可以拼接在url后面
        //2.当数据很大或者数据很敏感需要将数据放在data属性中
        $.ajax({
            url:"goods/findbyid?id=" + id,
            type: "get",
            success: function (res) {
                //打印得到的数据
                console.log(res);
                //通过id选择器找到img标签
                $("#image").prop("src",res.image);
                //商品名
                $("#name").text(res.name);
                //描述
                $("#description").text(res.description);
                //作者
                $("#author").text(res.author);
                //出版社
                $("#publisher").text(res.publisher);
                //出版时间
                $("#pubtime").text("出版时间:"+res.pubtime);
                //库存
                $("#stock").text("库存:"+res.stock);
                //销售价
                $("#salesprice").text(res.salesprice);
            }
        });

    </script>

      <!-- 底部栏开始 -->
      <div class="footer flux">
        <div class="f1 container">
            <ul>
                <li>
                    <div class="tb1"></div>
                    <div class="tbc">品类齐全，轻松购物</div>
                </li>
                <li>
                    <div class="tb2"></div>
                    <div class="tbc">多仓直发，极速配送</div>
               </li>
                <li>
                    <div class="tb3"></div>
                    <div class="tbc">正品行货，精致服务</div>
                </li>
                <li>
                    <div class="tb4"></div>
                    <div class="tbc">天天低价，畅选无忧</div>
                </li>
            </ul>
        </div>
        <div class="operator"></div>
        <div class="f2 container">
            <div>
                <ul>
                    <li>购物指南</li>
                    <li>
                        <a href="#">购物流程</a>
                    </li>
                    <li>
                        <a href="#">会员介绍</a>
                    </li>
                    <li>
                        <a href="#">生活旅行/团购</a>
                    </li>
                    <li>
                        <a href="#">常见问题</a>
                    </li>
                    <li>
                        <a href="#">大家电</a>
                    </li>
                    <li>
                        <a href="#">联系客服</a>
                    </li>
                </ul>
            </div>
            <div>
                <ul>
                    <li>购物指南</li>
                    <li>
                        <a href="#">购物流程</a>
                    </li>
                    <li>
                        <a href="#">会员介绍</a>
                    </li>
                    <li>
                        <a href="#">生活旅行/团购</a>
                    </li>
                    <li>
                        <a href="#">常见问题</a>
                    </li>
                    <li>
                        <a href="#">大家电</a>
                    </li>
                    <li>
                        <a href="#">联系客服</a>
                    </li>
                </ul>
            </div>
            <div>
                <ul>
                    <li>购物指南</li>
                    <li>
                        <a href="#">购物流程</a>
                    </li>
                    <li>
                        <a href="#">会员介绍</a>
                    </li>
                    <li>
                        <a href="#">生活旅行/团购</a>
                    </li>
                    <li>
                        <a href="#">常见问题</a>
                    </li>
                    <li>
                        <a href="#">大家电</a>
                    </li>
                    <li>
                        <a href="#">联系客服</a>
                    </li>
                </ul>
            </div>
            <div>
                <ul>
                    <li>购物指南</li>
                    <li>
                        <a href="#">购物流程</a>
                    </li>
                    <li>
                        <a href="#">会员介绍</a>
                    </li>
                    <li>
                        <a href="#">生活旅行/团购</a>
                    </li>
                    <li>
                        <a href="#">常见问题</a>
                    </li>
                    <li>
                        <a href="#">大家电</a>
                    </li>
                    <li>
                        <a href="#">联系客服</a>
                    </li>
                </ul>
            </div>
            <div>
                <ul>
                    <li>购物指南</li>
                    <li>
                        <a href="#">购物流程</a>
                    </li>
                    <li>
                        <a href="#">会员介绍</a>
                    </li>
                    <li>
                        <a href="#">生活旅行/团购</a>
                    </li>
                    <li>
                        <a href="#">常见问题</a>
                    </li>
                    <li>
                        <a href="#">大家电</a>
                    </li>
                    <li>
                        <a href="#">联系客服</a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="f3 container">
            <span>关于我们</span><span>|</span>
            <span>联系我们</span><span>|</span>
            <span>联系客服</span><span>|</span>
            <span>合作招商</span><span>|</span>
            <span>商家帮助</span><span>|</span>
            <span>营销中心</span><span>|</span>
            <span>English Site</span><span>|</span>
            <span>Media & IR</span>
        </div>
        <div class="f4 container">
            <span>Copyright &copy; 2020 - 2021  乐山LS.com 版权所有</span>
            <span>|</span>
            <span>消费者维权热线：4006067733经营证照</span>
            <span>|</span>
            <span>(川)网械平台备字(2020)第00004号</span>
            <span>|</span>
            <span>营业执照</span>
        </div>
    </div>
    <!-- 底部栏结束 -->
</body>


</html>