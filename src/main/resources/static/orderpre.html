<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="js/jquery.min.js"></script>
</head>
<body>
<!--购买的商品信息-->
<div>
    <h3>商品信息</h3>
    <table id="goodslist" border="1px;">
        <tr>
            <th>图片</th>
            <th>商品名称</th>
            <th>单价</th>
            <th>数量</th>
            <th>小计</th>
        </tr>
    </table>
</div>
<!--收货地址-->
<div>
    <h3>收货地址</h3>
    <table border="1px" id="address">

    </table>
</div>

<script>
    //得到购物车的id
    let ids = window.location.href.split("=")[1];
    console.log(ids);

    //1.提交ids，通过ids查出对应的商品信息
    $.ajax({
        url: "cart/byids",
        data:{
            "ids":ids  //1,2,3,4
        },
        success:function (res) {
            console.log(res);
            if (res.status = 'REQUEST_SUCCESS'){
                for(let cart of res.data){
                    let image_td = $("<td></td>");
                    let image = $("<img width='50px' height='50px'>").prop("src",cart.goods.image);
                    //将图片放到td
                    image_td.append(image);

                    //名称
                    let name_td = $("<td width='40%'></td>").text(cart.goods.name);
                    //单价
                    let price_td = $("<td></td>").text(cart.goods.salesprice);
                    //数量
                    let nums_td = $("<td></td>").text(cart.nums);
                    //小计
                    let sm_total = $("<td></td>").text(cart.nums * cart.goods.salesprice);

                    //创建tr
                    let tr = $("<tr></tr>");

                    //将td放到tr上
                    tr.append(image_td);
                    tr.append(name_td);
                    tr.append(price_td);
                    tr.append(nums_td);
                    tr.append(sm_total);

                    //将tr放到表格上
                    $("#goodslist").append(tr);
                }
            }
        }
    });
    //2.发送请求获取当前用户的收货地址
    $.ajax({
        url:'address/info',
        success:function (res) {
            console.log(res);
        }
    });

</script>
</body>
</html>